'use strict';

var P = require('bluebird');

function IpWhitelistDeserializer(data) {
  this.perform = function () {
    return P.try(function () {
      var deserialiazedData = {};

      deserialiazedData.useIpWhitelist = data.attributes.use_ip_whitelist;
      deserialiazedData.rules = data.attributes.rules.map(function (rule) {
        if (rule.ip_minimum) {
          rule.ipMinimum = rule.ip_minimum;
          delete rule.ip_minimum;
        }
        if (rule.ip_maximum) {
          rule.ipMaximum = rule.ip_maximum;
          delete rule.ip_maximum;
        }

        return rule;
      });

      return deserialiazedData;
    });
  };
}

module.exports = IpWhitelistDeserializer;